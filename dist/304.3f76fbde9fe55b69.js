"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[304],{2304:(P,m,r)=>{r.r(m),r.d(m,{default:()=>C});var p=r(6895),g=r(2876),u=r(9569),v=r(433),f=r(5609),h=r(6750),E=r(3189),t=r(1571),D=r(7556),M=r(4295),O=r(4631);function T(a,s){if(1&a&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.AsE(" En r\xe9paration il y a ",i.calculateDiff(e.date_debut)," | Achev\xe9 il y a ",i.calculateDiff(e.date_fin)," ")}}function Z(a,s){if(1&a&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" En r\xe9paration il y a ",i.calculateDiff(e.date_debut)," ")}}function A(a,s){if(1&a&&(t.TgZ(0,"div",13)(1,"div",14),t._uU(2),t.qZA(),t.TgZ(3,"div",4)(4,"h5",5),t._uU(5),t.qZA(),t.TgZ(6,"p",6),t._uU(7),t.qZA(),t.TgZ(8,"a",15),t._uU(9),t.qZA()(),t.YNc(10,T,2,2,"div",16),t.YNc(11,Z,2,1,"div",16),t.qZA()),2&a){const e=s.$implicit;t.xp6(2),t.hij(" ",e.Car.marque+" "+e.Car.type," "),t.xp6(3),t.Oqu(e.Piece.piece_name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.hij("$",e.Piece.prix*e.quantite+e.Piece.main_oeuvre,""),t.xp6(1),t.Q6J("ngIf",e.date_fin),t.xp6(1),t.Q6J("ngIf",!e.date_fin)}}function x(a,s){1&a&&(t.TgZ(0,"div",18)(1,"h3"),t._uU(2," Loading... "),t.qZA()())}const U=function(){return{backdropBorderRadius:"3px"}};let C=(()=>{class a{constructor(e,i,n,o){this.authService=e,this.router=i,this.route=n,this.receptionService=o,this.id=this.route.snapshot.paramMap.get("id"),this.loading=!1,this.authService.isClient()}ngOnInit(){this.getCarUser()}getCarUser(){this.loading=!0;const e={user:sessionStorage.getItem("id"),id:this.id};this.receptionService.getHistoriqueBycar(e).subscribe(o=>{this.loading=!1,this.list=o.reparation,this.car=o.car},o=>{this.message=o.message,this.loading=!1})}calculateDiff(e){const i=[" jours"," heures"," minutes"];var n=new Date(e),o=new Date,c="",_=Math.floor((o-n)/864e5),d=Math.floor(Math.abs(n-o)/36e5),l=Math.floor((o-n)/6e4);return _<1&&d<1&&l>=1&&(c=l+i[2]),_<1&&d>=1&&l>=1&&(c=d+i[1]),_>=1&&d>=1&&l>=1&&(c=_+i[0]),c}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(D.e),t.Y36(u.F0),t.Y36(u.gz),t.Y36(M.G))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-historepair"]],standalone:!0,features:[t.jDz],decls:20,vars:8,consts:[[1,"row"],[1,"col-sm-5"],[1,"card",2,"width","22rem"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"col-sm-1",2,"height","439px","border-left","1px solid"],[1,"col-sm-6"],["class","card text-center",4,"ngFor","ngForOf"],[1,"my-container"],["customLoadingTemplate",""],[3,"show","config","template"],[1,"card","text-center"],[1,"card-header"],[1,"btn","btn-outline-secondary"],["class","card-footer text-muted",4,"ngIf"],[1,"card-footer","text-muted"],[1,"custom-class"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"app-card")(2,"div",0)(3,"div",1)(4,"div",2),t._UZ(5,"img",3),t.TgZ(6,"div",4)(7,"h5",5),t._uU(8),t.qZA(),t.TgZ(9,"p",6),t._uU(10),t.qZA()(),t.TgZ(11,"div",4),t._UZ(12,"p",6),t.qZA()()(),t._UZ(13,"div",7),t.TgZ(14,"div",8),t.YNc(15,A,12,6,"div",9),t.qZA()(),t.TgZ(16,"div",10),t.YNc(17,x,3,0,"ng-template",null,11,t.W1O),t._UZ(19,"ngx-loading",12),t.qZA()()()),2&e){const n=t.MAs(18);t.xp6(5),t.Q6J("src",i.car.image,t.LSH),t.xp6(3),t.Oqu(i.car.marque+" "+i.car.type),t.xp6(2),t.hij("Immatricule : ",i.car.immatriculation,""),t.xp6(5),t.Q6J("ngForOf",i.list),t.xp6(4),t.Q6J("show",i.loading)("config",t.DdM(7,U))("template",n)}},dependencies:[p.ez,p.sg,p.O5,g.m,O.A,u.Bz,v.UX,f.q,f.RJ,h.q,E.h]}),a})()}}]);