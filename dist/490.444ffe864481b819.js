"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[490],{490:(I,m,i)=>{i.r(m),i.d(m,{default:()=>T});var u=i(6895),p=i(2876),c=i(9569),t=i(433),d=i(5609),e=i(1571),g=i(7556),f=i(529);let v=(()=>{class o{constructor(r,s){this.http=r,this.router=s,this.http=r,this.router=s}create(r){return this.http.post("https://expressjs.cyclic.app/create_car",r)}}return o.\u0275fac=function(r){return new(r||o)(e.LFG(f.eN),e.LFG(c.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Z=i(4631);function b(o,a){if(1&o){const r=e.EpF();e.TgZ(0,"div",24)(1,"strong"),e._uU(2,"D\xe9p\xf4t de voiture r\xe9ussie!"),e.qZA(),e.TgZ(3,"button",25),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.removeMessage)}),e.qZA()()}}function y(o,a){1&o&&(e.TgZ(0,"div",26)(1,"h3"),e._uU(2," Loading... "),e.qZA()())}const C=function(){return{backdropBorderRadius:"3px"}};let T=(()=>{class o{constructor(r,s){this.authService=r,this.bonService=s,this.imageSrc="../../../../assets/images/add-icon.svg",this.message=!1,this.loading=!1,this.form=new t.cw({id_user:new t.NI(sessionStorage.getItem("id")),image:new t.NI(null,[t.kI.required]),marque:new t.NI(null,[t.kI.required]),type:new t.NI(null,[t.kI.required]),moteur:new t.NI(null,[t.kI.required]),immatricule:new t.NI(null,[t.kI.required])}),this.authService.isClient()}get image(){return this.form.get("image")}get marque(){return this.form.get("marque")}get type(){return this.form.get("type")}get moteur(){return this.form.get("moteur")}get immatricule(){return this.form.get("immatricule")}onChange(r){const s=new FileReader,[n]=r.target.files;s.readAsDataURL(n),s.onload=()=>{this.imageSrc=s.result,this.form.patchValue({image:s.result})}}onSubmit(){this.loading=!0;const n={image:this.form.value.image,marque:this.form.value.marque,type:this.form.value.type,moteur:this.form.value.moteur,immatricule:this.form.value.immatricule,User:sessionStorage.getItem("id")};this.bonService.create(n).subscribe(l=>{200===l.status?(this.loading=!1,this.show_message_success(),this.imageSrc="../../../../assets/images/add-icon.svg",this.form.reset()):(this.loading=!1,this.form.reset())},l=>{this.loading=!1,this.form.reset()})}show_message_success(){this.message=!0,setTimeout(()=>{this.message=!1},4e3)}removeMessage(){this.message=!1}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(g.e),e.Y36(v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-bon-entre"]],standalone:!0,features:[e.jDz],decls:40,vars:7,consts:[["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["method","POST",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-12"],["cardTitle","Merci de renseigner les champs suivants."],[1,"col-sm-6"],["type","file","id","file",2,"display","none",3,"change"],["for","file"],["alt","image",2,"width","451px","height","379px",3,"src"],[1,"col-sm-1",2,"height","439px","border-left","1px solid #d3bde9f5"],[1,"col-sm-5"],["cardTitle","* Champs requis"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","id","exampleInputEmail1","formControlName","marque","aria-describedby","emailHelp","placeholder","Citroen",1,"form-control"],["id","emailHelp",1,"form-text","text-muted"],["type","text","id","exampleInputEmail1","formControlName","type","aria-describedby","emailHelp","placeholder","C3",1,"form-control"],["type","email","formControlName","moteur","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","1.9 TDI Boite auto",1,"form-control"],["type","text","id","exampleInputEmail1","formControlName","immatricule","aria-describedby","emailHelp","placeholder","AA-456-BB",1,"form-control"],[1,"d-grid","mt-4"],["type","submit",1,"btn","btn-secondary"],[1,"my-container"],["customLoadingTemplate",""],[3,"show","config","template"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"],[1,"custom-class"]],template:function(r,s){if(1&r&&(e.YNc(0,b,4,0,"div",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(2,"div",2)(3,"div",3)(4,"app-card",4)(5,"div",2)(6,"div",5)(7,"input",6),e.NdJ("change",function(l){return s.onChange(l)}),e.qZA(),e.TgZ(8,"label",7),e._UZ(9,"img",8),e.qZA()(),e._UZ(10,"div",9),e.TgZ(11,"div",10)(12,"app-card",11)(13,"div",12)(14,"label",13),e._uU(15,"Marque: *"),e.qZA(),e._UZ(16,"input",14)(17,"small",15),e.qZA(),e.TgZ(18,"div",12)(19,"label",13),e._uU(20,"Type: *"),e.qZA(),e._UZ(21,"input",16)(22,"small",15),e.qZA(),e.TgZ(23,"div",12)(24,"label",13),e._uU(25,"Motorisation: *"),e.qZA(),e._UZ(26,"input",17)(27,"small",15),e.qZA(),e.TgZ(28,"div",12)(29,"label",13),e._uU(30,"Plaque d'immatriculation: *"),e.qZA(),e._UZ(31,"input",18)(32,"small",15),e.qZA(),e.TgZ(33,"div",19)(34,"button",20),e._uU(35,"Valider"),e.qZA()()()()()()()()(),e.TgZ(36,"div",21),e.YNc(37,y,3,0,"ng-template",null,22,e.W1O),e._UZ(39,"ngx-loading",23),e.qZA()),2&r){const n=e.MAs(38);e.Q6J("ngIf",s.message),e.xp6(1),e.Q6J("formGroup",s.form),e.xp6(8),e.Q6J("src",s.imageSrc,e.LSH),e.xp6(30),e.Q6J("show",s.loading)("config",e.DdM(6,C))("template",n)}},dependencies:[u.ez,u.O5,p.m,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,Z.A,c.Bz,t.UX,d.q,d.RJ]}),o})()}}]);