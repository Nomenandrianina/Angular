"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[22],{8022:(C,d,a)=>{a.r(d),a.d(d,{default:()=>P});var c=a(9569),m=a(6895),u=a(2876),i=a(433),_=a(5609),p=a(3189),e=a(1571),g=a(652),f=a(4631);function h(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",20)(1,"strong"),e._uU(2,"Nouveau pi\xe8ce enregistr\xe9!"),e.qZA(),e.TgZ(3,"button",21),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.removeMessage)}),e.qZA()()}}function v(t,s){1&t&&(e.TgZ(0,"div",22),e._uU(1,"Veuillez entrer la d\xe9signation"),e.qZA())}function A(t,s){1&t&&(e.TgZ(0,"div",22),e._uU(1,"Veuillez entrer le prix"),e.qZA())}function E(t,s){1&t&&(e.TgZ(0,"div",22),e._uU(1,"Veuillez entrer le prix main oeuvre"),e.qZA())}function T(t,s){1&t&&(e.TgZ(0,"div",23)(1,"h3"),e._uU(2," Loading... "),e.qZA()())}const Z=function(){return{backdropBorderRadius:"3px"}};let P=(()=>{class t{constructor(n){this.financierservice=n,this.imageSrc="../../../../assets/images/photo_icon.png",this.loading=!1,this.message=!1,this.form=new i.cw({photo:new i.NI(null,[i.kI.required]),piece_name:new i.NI(null,[i.kI.required]),prix:new i.NI(null,[i.kI.required]),main_oeuvre:new i.NI(null,[i.kI.required])})}ngOnInit(){console.log("all_errier",this.list_erreur)}onChange(n){const r=new FileReader,[o]=n.target.files;r.readAsDataURL(o),r.onload=()=>{this.imageSrc=r.result,this.form.patchValue({photo:r.result})}}show_message_success(){this.message=!0,setTimeout(()=>{this.message=!1},4e3)}removeMessage(){this.message=!1}onSubmit(){this.loading=!0,this.financierservice.add_piece({photo:this.form.value.photo,piece_name:this.form.value.piece_name,prix:this.form.value.prix,main_oeuvre:this.form.value.main_oeuvre}).subscribe(l=>{200===l.status?(this.loading=!1,this.show_message_success(),this.imageSrc="../../../../assets/images/add-icon.svg",this.form.reset()):this.loading=!1},l=>{this.list_erreur=l.error.error.errors,this.photo_required=this.list_erreur.photo,this.piece_name_required=this.list_erreur.piece_name,this.prix_required=this.list_erreur.prix,this.main_oeuvre_required=this.list_erreur.main_oeuvre,this.loading=!1})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g.Q))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-piece"]],standalone:!0,features:[e.jDz],decls:37,vars:10,consts:[["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["method","POST",3,"formGroup","ngSubmit"],["cardTitle","* Champs requis"],[1,"col-sm-5",2,"padding-left","10%"],["for","exampleInputEmail1"],[1,"form-group"],["type","file","id","file",2,"display","none",3,"change"],["for","file"],["alt","image",2,"width","50 px","height","145px",3,"src"],["type","text","id","exampleInputEmail1","formControlName","piece_name","aria-describedby","emailHelp","placeholder","disque embrayage",1,"form-control"],["id","emailHelp",1,"form-text","text-muted"],["class","alert","style","color: red;",4,"ngIf"],["type","number","id","exampleInputEmail1","formControlName","prix","aria-describedby","emailHelp","placeholder","prix",1,"form-control"],["type","email","formControlName","main_oeuvre","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","20000",1,"form-control"],[1,"d-grid","mt-4"],[1,"col-md-4"],["type","submit",1,"btn","btn-secondary"],[1,"my-container"],["customLoadingTemplate",""],[3,"show","config","template"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"],[1,"alert",2,"color","red"],[1,"custom-class"]],template:function(n,r){if(1&n&&(e.YNc(0,h,4,0,"div",0),e.TgZ(1,"div")(2,"form",1),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(3,"app-card",2)(4,"div",3)(5,"label",4),e._uU(6,"photo *"),e.qZA(),e.TgZ(7,"div",5)(8,"input",6),e.NdJ("change",function(l){return r.onChange(l)}),e.qZA(),e.TgZ(9,"label",7),e._UZ(10,"img",8),e.qZA()(),e.TgZ(11,"div",5)(12,"label",4),e._uU(13,"D\xe9signation *"),e.qZA(),e._UZ(14,"input",9)(15,"small",10),e.YNc(16,v,2,0,"div",11),e.qZA(),e.TgZ(17,"div",5)(18,"label",4),e._uU(19,"prix *"),e.qZA(),e._UZ(20,"input",12)(21,"small",10),e.YNc(22,A,2,0,"div",11),e.qZA(),e.TgZ(23,"div",5)(24,"label",4),e._uU(25,"Prix main oeuvre: *"),e.qZA(),e._UZ(26,"input",13)(27,"small",10),e.YNc(28,E,2,0,"div",11),e.qZA(),e.TgZ(29,"div",14)(30,"div",15)(31,"button",16),e._uU(32,"Valider"),e.qZA()()()()()()(),e.TgZ(33,"div",17),e.YNc(34,T,3,0,"ng-template",null,18,e.W1O),e._UZ(36,"ngx-loading",19),e.qZA()),2&n){const o=e.MAs(35);e.Q6J("ngIf",r.message),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(8),e.Q6J("src",r.imageSrc,e.LSH),e.xp6(6),e.Q6J("ngIf",r.piece_name_required),e.xp6(6),e.Q6J("ngIf",r.prix_required),e.xp6(6),e.Q6J("ngIf",r.main_oeuvre_required),e.xp6(8),e.Q6J("show",r.loading)("config",e.DdM(9,Z))("template",o)}},dependencies:[m.ez,m.O5,u.m,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,f.A,c.Bz,i.UX,_.q,_.RJ,p.h]}),t})()}}]);