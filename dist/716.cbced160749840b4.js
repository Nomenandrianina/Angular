"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[716],{6716:(U,u,r)=>{r.r(u),r.d(u,{default:()=>T});var g=r(6895),l=r(9569),n=r(433),d=r(5609),e=r(1571),c=r(7556);function p(i,s){1&i&&(e.TgZ(0,"span",37),e._uU(1,"Veuillez-entrez votre email!"),e.qZA())}function h(i,s){1&i&&(e.TgZ(0,"span",37),e._uU(1,"Veuillez-entrez votre mot de passe!"),e.qZA())}function _(i,s){1&i&&(e.TgZ(0,"div",38)(1,"h3"),e._uU(2," Loading... "),e.qZA()())}const f=function(){return["/guest/login/client"]},Z=function(){return["/guest/admin/register"]},v=function(){return{backdropBorderRadius:"3px"}};let T=(()=>{class i{constructor(a,t){this.authService=a,this.router=t,this.loading=!1,this.loginForm=new n.cw({email:new n.NI(null,[n.kI.required,n.kI.email]),mdp:new n.NI(null,[n.kI.required])}),this.authService.Check_Connected_atelier()}get email(){return this.loginForm.get("email")}get mdp(){return this.loginForm.get("mdp")}checkLogin(){this.loading=!0,this.authService.login({email:this.loginForm.value.email,password:this.loginForm.value.mdp}).subscribe(o=>{200===o.status?(console.log("role",o.user.Role.name),this.loading=!1,localStorage.setItem("token",o.token),sessionStorage.setItem("name",o.user.name),sessionStorage.setItem("firstname",o.user.firstname),sessionStorage.setItem("email",o.user.email),sessionStorage.setItem("photo",o.user.photo),sessionStorage.setItem("role",o.user.Role.name),"Atelier"==o.user.Role.name&&this.router.navigateByUrl("/home/atelier"),"Financier"==o.user.Role.name&&this.router.navigateByUrl("/home/financier")):(this.loading=!1,this.message=o.error.error,this.loginForm.reset())},o=>{this.loading=!1,this.message=o.error.error,this.loginForm.reset()})}}return i.\u0275fac=function(a){return new(a||i)(e.Y36(c.e),e.Y36(l.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-login"]],standalone:!0,features:[e.jDz],decls:57,vars:12,consts:[[1,"auth-main"],[1,"auth-wrapper","v3"],[1,"auth-form"],[1,"card","my-5"],[1,"card-body"],["href","#",1,"d-flex","justify-content-center"],["src","assets/images/logos.png",2,"width","185px"],[1,"row"],[1,"d-flex","justify-content-center"],[1,"auth-header"],[1,"text-secondary","mt-5"],[1,"d-grid"],["type","button",1,"btn","mt-2","btn-light-primary","bg-light","text-muted",3,"routerLink"],["src","assets/images/authentication/client-icon.svg"],[1,"saprator","mt-3"],["method","POST",1,"pt-3",3,"formGroup","ngSubmit"],["type","button","disabled","",1,"btn","mt-2","btn-light-primary","bg-light","text-muted"],["src","assets/images/authentication/admin-icon.svg"],[1,"form-floating","mb-3"],["type","email","formControlName","email","id","floatingInput","value","info@codedthemes.com",1,"form-control"],["for","floatingInput"],["class","error text-danger","style","color: red",4,"ngIf"],["type","password","formControlName","mdp","id","password","value","12345",1,"form-control"],["for","password"],[1,"d-flex","mt-1","justify-content-between"],[1,"form-check"],["type","checkbox","id","customCheckc1","checked","",1,"form-check-input","input-primary"],["for","customCheckc1",1,"form-check-label","text-muted"],[1,"text-secondary"],["href","javascript:"],[1,"d-grid","mt-4"],["type","submit",1,"btn","btn-secondary"],[2,"color","red"],[3,"routerLink"],[1,"my-container"],["customLoadingTemplate",""],[3,"show","config","template"],[1,"error","text-danger",2,"color","red"],[1,"custom-class"]],template:function(a,t){if(1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"h2",10)(11,"b"),e._uU(12,"Authentification"),e.qZA()()()()(),e.TgZ(13,"div",11)(14,"button",12),e._UZ(15,"img",13),e._uU(16,"Connexion en tant que client "),e.qZA()(),e.TgZ(17,"div",14)(18,"span"),e._uU(19,"ou"),e.qZA()(),e.TgZ(20,"form",15),e.NdJ("ngSubmit",function(){return t.checkLogin()}),e.TgZ(21,"div",11)(22,"button",16),e._UZ(23,"img",17),e._uU(24,"Connexion en tant qu'Administrateur "),e.qZA()(),e._UZ(25,"hr"),e.TgZ(26,"div",18),e._UZ(27,"input",19),e.TgZ(28,"label",20),e._uU(29,"Adresse email"),e.qZA(),e.YNc(30,p,2,0,"span",21),e.qZA(),e.TgZ(31,"div",18),e._UZ(32,"input",22),e.TgZ(33,"label",23),e._uU(34,"Mot de passe"),e.qZA(),e.YNc(35,h,2,0,"span",21),e.qZA(),e.TgZ(36,"div",24)(37,"div",25),e._UZ(38,"input",26),e.TgZ(39,"label",27),e._uU(40,"Remember me"),e.qZA()(),e.TgZ(41,"h5",28)(42,"a",29),e._uU(43,"mot de passe oubli\xe9?"),e.qZA()()(),e.TgZ(44,"div",30)(45,"button",31),e._uU(46,"Connexion"),e.qZA()(),e.TgZ(47,"span",32),e._uU(48),e.qZA()(),e._UZ(49,"hr"),e.TgZ(50,"h5",8)(51,"a",33),e._uU(52,"S'inscrire?"),e.qZA()()()()()(),e.TgZ(53,"div",34),e.YNc(54,_,3,0,"ng-template",null,35,e.W1O),e._UZ(56,"ngx-loading",36),e.qZA()()),2&a){const m=e.MAs(55);e.xp6(14),e.Q6J("routerLink",e.DdM(9,f)),e.xp6(6),e.Q6J("formGroup",t.loginForm),e.xp6(10),e.Q6J("ngIf",t.email.invalid&&(t.email.dirty||t.email.touched)),e.xp6(5),e.Q6J("ngIf",t.mdp.invalid&&(t.mdp.dirty||t.mdp.touched)),e.xp6(13),e.Oqu(t.message),e.xp6(3),e.Q6J("routerLink",e.DdM(10,Z)),e.xp6(5),e.Q6J("show",t.loading)("config",e.DdM(11,v))("template",m)}},dependencies:[g.ez,g.O5,l.Bz,l.rH,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,d.q,d.RJ]}),i})()}}]);