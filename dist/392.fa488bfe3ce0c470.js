"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[392],{1392:(A,g,o)=>{o.r(g),o.d(g,{default:()=>b});var d=o(6895),p=o(2876),s=o(433),u=o(5609),t=o(1571),f=o(7556),h=o(4295),_=o(9569),Z=o(4631);function v(i,r){1&i&&(t.TgZ(0,"div",31),t._UZ(1,"i",32),t.TgZ(2,"span",33),t._uU(3,"Status:"),t.qZA(),t._uU(4," Unpaid"),t.qZA())}function x(i,r){1&i&&(t.TgZ(0,"div",31),t._UZ(1,"i",32),t.TgZ(2,"span",33),t._uU(3,"Status:"),t.qZA(),t._uU(4," Paid"),t.qZA())}function T(i,r){if(1&i&&(t.TgZ(0,"div",58)(1,"div",59)(2,"div",37),t._uU(3),t.qZA(),t.TgZ(4,"div",38),t._uU(5),t.qZA(),t.TgZ(6,"div",38),t._uU(7),t.qZA(),t.TgZ(8,"div",60),t._uU(9),t.qZA(),t.TgZ(10,"div",61),t._uU(11),t.qZA()()()),2&i){const n=r.$implicit;t.xp6(3),t.Oqu(n.description),t.xp6(2),t.Oqu(n.Piece.piece_name),t.xp6(2),t.Oqu(n.quantite),t.xp6(2),t.hij("$",n.Piece.prix,""),t.xp6(2),t.hij("$",n.Piece.main_oeuvre,"")}}function U(i,r){if(1&i){const n=t.EpF();t.TgZ(0,"div")(1,"form",62),t.NdJ("ngSubmit",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.paiement())}),t.TgZ(2,"button",63),t._uU(3,"Payer maintenant"),t.qZA()()()}if(2&i){const n=t.oxw();t.xp6(1),t.Q6J("formGroup",n.form)}}function P(i,r){1&i&&(t.TgZ(0,"div",64),t._uU(1," Toutes les r\xe9parations pour cette voiture ne sont pas encore termin\xe9es! "),t.qZA())}function O(i,r){1&i&&(t.TgZ(0,"div",65),t._uU(1," Payement terminer! "),t.qZA())}function C(i,r){1&i&&(t.TgZ(0,"div",66)(1,"h3"),t._uU(2," Loading... "),t.qZA()())}const M=function(){return{backdropBorderRadius:"3px"}};let b=(()=>{class i{constructor(n,e,a,c){this.authService=n,this.receptionService=e,this.router=a,this.route=c,this.loading=!1,this.id=this.route.snapshot.paramMap.get("id"),this.id_reparation=[],this.form=new s.cw({id_user:new s.NI(sessionStorage.getItem("id")),datepaie:new s.NI(null),etat:new s.NI("Unpaid"),status:new s.NI("Envoye du paiement")}),this.authService.isClient(),this.name=sessionStorage.getItem("name"),this.firstname=sessionStorage.getItem("firstname"),this.email=sessionStorage.getItem("email")}get id_user(){return this.form.get("id_user")}get datepaie(){return this.form.get("datepaie")}get etat(){return this.form.get("etat")}get status(){return this.form.get("status")}ngOnInit(){this.getFactureCarUser()}getFactureCarUser(){this.loading=!0,this.receptionService.getFactureBycar({id:this.id}).subscribe(c=>{this.loading=!1,this.list=c.reparation,this.detail=c.car,console.log(this.list),this.id_car=this.detail._id,this.list.forEach(l=>{this.id_reparation.push(l._id)}),this.total=this.list.reduce((l,m)=>l+m.Piece.prix*m.quantite+m.Piece.main_oeuvre,0)},c=>{this.message=c.message,this.loading=!1})}checkStatus(n){var e=!1;return n.forEach(a=>{"Terminer"==a.status?(console.log(!0),e=!0):(console.log(!1),e=!1)}),e}paiement(){this.loading=!0;const a={User:this.form.value.id_user,Car:this.id_car,Reparation:this.id_reparation,datepaie:Date.now(),etat:this.form.value.etat,status:this.form.value.status};this.receptionService.SendPaiement(a).subscribe(c=>{200===c.status?(this.loading=!1,this.message=!0,this.router.navigateByUrl("/client/list/paiement")):this.loading=!1},c=>{this.loading=!1,this.form.reset()})}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(f.e),t.Y36(h.G),t.Y36(_.F0),t.Y36(_.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-facture"]],standalone:!0,features:[t.jDz],decls:104,vars:18,consts:[[1,"row"],["cardTitle","Facture"],["href","https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"page-content","container"],[1,"page-header","text-blue-d2"],[1,"page-title","text-secondary-d1"],[1,"page-info"],[1,"fa","fa-angle-double-right","text-80"],[1,"page-tools"],[1,"action-buttons"],["href","#","data-title","Print",1,"btn","bg-white","btn-light","mx-1px","text-95"],[1,"mr-1","fa","fa-print","text-primary-m1","text-120","w-2"],["href","#","data-title","PDF",1,"btn","bg-white","btn-light","mx-1px","text-95"],[1,"mr-1","fa","fa-file-pdf-o","text-danger-m1","text-120","w-2"],[1,"container","px-0"],[1,"row","mt-4"],[1,"col-12","col-lg-12"],[1,"col-12"],[1,"text-center","text-150"],[1,"text-default-d3"],[1,"row","brc-default-l1","mx-n1","mb-4"],[1,"col-sm-6"],[1,"text-sm","text-grey-m2","align-middle"],[1,"text-600","text-110","text-blue","align-middle"],[1,"text-grey-m2"],[1,"my-1"],[1,"fa","fa-phone","fa-flip-horizontal","text-secondary"],[1,"text-600"],[1,"text-95","col-sm-6","align-self-start","d-sm-flex","justify-content-end"],[1,"d-sm-none"],[1,"mt-1","mb-2","text-secondary-m1","text-600","text-125"],[1,"my-2"],[1,"fa","fa-circle","text-blue-m2","text-xs","mr-1"],[1,"text-600","text-90"],["class","my-2",4,"ngIf"],[1,"mt-4"],[1,"row","text-600","text-white","bgc-default-tp1","py-25"],[1,"col-6","col-sm-3"],[1,"d-none","d-sm-block","col-3"],[1,"col-1","col-sm-2"],[1,"col-1","col-sm-1"],["class","text-95 text-secondary-d3",4,"ngFor","ngForOf"],[1,"row","border-b-2","brc-default-l2"],[1,"row","mt-3"],[1,"col-12","col-sm-7","text-grey-d2","text-95","mt-2","mt-lg-0"],[1,"col-12","col-sm-5","text-grey","text-90","order-first","order-sm-last"],[1,"row","my-2"],[1,"col-9","text-right"],[1,"col-3"],[1,"text-120","text-secondary-d1"],[1,"row","my-2","align-items-center","bgc-primary-l3","p-2"],[1,"text-150","text-success-d3","opacity-2"],[4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"my-container"],["customLoadingTemplate",""],[3,"show","config","template"],[1,"text-95","text-secondary-d3"],[1,"row","mb-2","mb-sm-0","py-25"],[1,"col-1","col-sm-2","text-secondary-d2"],[1,"col-1","col-sm-1","text-secondary-d2"],["method","POST",3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-info","btn-bold","px-4","float-right","mt-3","mt-lg-0"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],[1,"custom-class"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"app-card",1),t._UZ(2,"link",2),t.TgZ(3,"div",3)(4,"div",4)(5,"h1",5),t._uU(6," Facture "),t.TgZ(7,"small",6),t._UZ(8,"i",7),t._uU(9),t.qZA()(),t.TgZ(10,"div",8)(11,"div",9)(12,"a",10),t._UZ(13,"i",11),t._uU(14," Print "),t.qZA(),t.TgZ(15,"a",12),t._UZ(16,"i",13),t._uU(17," Export "),t.qZA()()()(),t.TgZ(18,"div",14)(19,"div",15)(20,"div",16)(21,"div",0)(22,"div",17)(23,"div",18)(24,"span",19),t._uU(25,"GasyReparator"),t.qZA()()()(),t._UZ(26,"hr",20),t.TgZ(27,"div",0)(28,"div",21)(29,"div")(30,"span",22),t._uU(31,"To: "),t.qZA(),t.TgZ(32,"span",23),t._uU(33),t.qZA()(),t.TgZ(34,"div",24)(35,"div",25),t._uU(36," email: "),t.TgZ(37,"span",23),t._uU(38),t.qZA()(),t.TgZ(39,"div",25),t._uU(40," State, Country "),t.qZA(),t.TgZ(41,"div",25),t._UZ(42,"i",26),t.TgZ(43,"b",27),t._uU(44," 111-111-111"),t.qZA()()()(),t.TgZ(45,"div",28),t._UZ(46,"hr",29),t.TgZ(47,"div",24)(48,"div",30),t._uU(49," Invoice "),t.qZA(),t.TgZ(50,"div",31),t._UZ(51,"i",32),t.TgZ(52,"span",33),t._uU(53,"Marque :"),t.qZA(),t._uU(54),t.qZA(),t.TgZ(55,"div",31),t._UZ(56,"i",32),t.TgZ(57,"span",33),t._uU(58,"Type :"),t.qZA(),t._uU(59),t.qZA(),t.TgZ(60,"div",31),t._UZ(61,"i",32),t.TgZ(62,"span",33),t._uU(63,"Immatricule:"),t.qZA(),t._uU(64),t.qZA(),t.YNc(65,v,5,0,"div",34),t.YNc(66,x,5,0,"div",34),t.qZA()()(),t.TgZ(67,"div",35)(68,"div",36)(69,"div",37),t._uU(70,"Descriptions"),t.qZA(),t.TgZ(71,"div",38),t._uU(72,"Pi\xe8ces"),t.qZA(),t.TgZ(73,"div",38),t._uU(74,"Quantit\xe9s"),t.qZA(),t.TgZ(75,"div",39),t._uU(76,"Prix"),t.qZA(),t.TgZ(77,"div",40),t._uU(78,"Main d'oeuvre"),t.qZA()(),t.YNc(79,T,12,5,"div",41),t._UZ(80,"div",42),t.TgZ(81,"div",43),t._UZ(82,"div",44),t.TgZ(83,"div",45)(84,"div",46)(85,"div",47),t._uU(86," SubTotal "),t.qZA(),t.TgZ(87,"div",48)(88,"span",49),t._uU(89),t.qZA()()(),t.TgZ(90,"div",50)(91,"div",47),t._uU(92," Total Amount "),t.qZA(),t.TgZ(93,"div",48)(94,"span",51),t._uU(95),t.qZA()()()()(),t._UZ(96,"hr"),t.YNc(97,U,4,1,"div",52),t.YNc(98,P,2,0,"div",53),t.YNc(99,O,2,0,"div",54),t.qZA()()()()()(),t.TgZ(100,"div",55),t.YNc(101,C,3,0,"ng-template",null,56,t.W1O),t._UZ(103,"ngx-loading",57),t.qZA()()),2&n){const a=t.MAs(102);t.xp6(9),t.hij(" IM: #",e.detail.immatriculation," "),t.xp6(24),t.Oqu(e.name+" "+e.firstname),t.xp6(5),t.Oqu(e.email),t.xp6(16),t.hij(" ",e.detail.marque,""),t.xp6(5),t.hij(" ",e.detail.type,""),t.xp6(5),t.Oqu(e.detail.immatriculation),t.xp6(1),t.Q6J("ngIf","1"==e.detail.etat),t.xp6(1),t.Q6J("ngIf","2"==e.detail.etat),t.xp6(13),t.Q6J("ngForOf",e.list),t.xp6(10),t.hij("$",e.total,""),t.xp6(6),t.hij("$",e.total,""),t.xp6(2),t.Q6J("ngIf",1==e.checkStatus(e.list)&&"1"==e.detail.etat),t.xp6(1),t.Q6J("ngIf",0==e.checkStatus(e.list)&&"1"==e.detail.etat),t.xp6(1),t.Q6J("ngIf","2"==e.detail.etat),t.xp6(4),t.Q6J("show",e.loading)("config",t.DdM(17,M))("template",a)}},dependencies:[d.ez,d.sg,d.O5,p.m,s._Y,s.JL,s.sg,Z.A,s.UX,u.q,u.RJ],styles:["body[_ngcontent-%COMP%]{margin-top:20px;color:#484b51}.text-secondary-d1[_ngcontent-%COMP%]{color:#728299!important}.page-header[_ngcontent-%COMP%]{margin:0 0 1rem;padding-bottom:1rem;padding-top:.5rem;border-bottom:1px dotted #e2e2e2;display:flex;justify-content:space-between;align-items:center}.page-title[_ngcontent-%COMP%]{padding:0;margin:0;font-size:1.75rem;font-weight:300}.brc-default-l1[_ngcontent-%COMP%]{border-color:#dce9f0!important}.ml-n1[_ngcontent-%COMP%], .mx-n1[_ngcontent-%COMP%]{margin-left:-.25rem!important}.mr-n1[_ngcontent-%COMP%], .mx-n1[_ngcontent-%COMP%]{margin-right:-.25rem!important}.mb-4[_ngcontent-%COMP%], .my-4[_ngcontent-%COMP%]{margin-bottom:1.5rem!important}hr[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem;border:0;border-top:1px solid rgba(0,0,0,.1)}.text-grey-m2[_ngcontent-%COMP%]{color:#888a8d!important}.text-success-m2[_ngcontent-%COMP%]{color:#86bd68!important}.font-bolder[_ngcontent-%COMP%], .text-600[_ngcontent-%COMP%]{font-weight:600!important}.text-110[_ngcontent-%COMP%]{font-size:110%!important}.text-blue[_ngcontent-%COMP%]{color:#478fcc!important}.pb-25[_ngcontent-%COMP%], .py-25[_ngcontent-%COMP%]{padding-bottom:.75rem!important}.pt-25[_ngcontent-%COMP%], .py-25[_ngcontent-%COMP%]{padding-top:.75rem!important}.bgc-default-tp1[_ngcontent-%COMP%]{background-color:#79a9c5eb!important}.bgc-default-l4[_ngcontent-%COMP%], .bgc-h-default-l4[_ngcontent-%COMP%]:hover{background-color:#f3f8fa!important}.page-header[_ngcontent-%COMP%]   .page-tools[_ngcontent-%COMP%]{align-self:flex-end}.btn-light[_ngcontent-%COMP%]{color:#757984;background-color:#f5f6f9;border-color:#dddfe4}.w-2[_ngcontent-%COMP%]{width:1rem}.text-120[_ngcontent-%COMP%]{font-size:120%!important}.text-primary-m1[_ngcontent-%COMP%]{color:#4087d4!important}.text-danger-m1[_ngcontent-%COMP%]{color:#dd4949!important}.text-blue-m2[_ngcontent-%COMP%]{color:#68a3d5!important}.text-150[_ngcontent-%COMP%]{font-size:150%!important}.text-60[_ngcontent-%COMP%]{font-size:60%!important}.text-grey-m1[_ngcontent-%COMP%]{color:#7b7d81!important}.align-bottom[_ngcontent-%COMP%]{vertical-align:bottom!important}"]}),i})()}}]);